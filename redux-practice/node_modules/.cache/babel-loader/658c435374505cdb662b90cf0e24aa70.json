{"ast":null,"code":"import axios from \"axios\";\nimport * as actions from \"../../actions\";\nconsole.log(\"API !!!\");\n\nconst api = _ref => {\n  let {\n    dispatch\n  } = _ref;\n  return next => async action => {\n    if (action.type !== actions.apiCallBegan.type) return next(action);\n    console.log(\"TYPE: apiCallBegan\", actions.apiCallBegan.type);\n    next(action); // if not placed here, this action will be swallowed and redux will move onto the actions defined below this\n\n    const {\n      url,\n      method,\n      data,\n      onStart,\n      onSucces,\n      onError\n    } = action;\n    if (onStart) dispatch;\n\n    try {\n      const response = await axios.request({\n        baseURL: \"http://localhost:8082/api/users/get-all-students\",\n        url,\n        method,\n        data\n      }); //general\n\n      console.log(\"dispatch success action\");\n      dispatch(actions.apiCallSuccess(response.data)); // sepcific\n\n      if (onSucces) dispatch({\n        type: onSucces,\n        payload: response.data\n      });\n    } catch (error) {\n      // general error message\n      dispatch(actions.apiCallFailed(error)); // specific error message\n\n      if (onError) dispatch({\n        type: onError,\n        payload: error\n      });\n    }\n  };\n};\n\nexport default api;","map":{"version":3,"sources":["/Users/menahaltanveer/Desktop/mern-training/redux-practice/src/store/middleware/api.js"],"names":["axios","actions","console","log","api","dispatch","next","action","type","apiCallBegan","url","method","data","onStart","onSucces","onError","response","request","baseURL","apiCallSuccess","payload","error","apiCallFailed"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,OAAZ,MAAyB,eAAzB;AACAC,OAAO,CAACC,GAAR,CAAY,SAAZ;;AACA,MAAMC,GAAG,GACP;AAAA,MAAC;AAAEC,IAAAA;AAAF,GAAD;AAAA,SACCC,IAAD,IACA,MAAOC,MAAP,IAAkB;AAChB,QAAIA,MAAM,CAACC,IAAP,KAAgBP,OAAO,CAACQ,YAAR,CAAqBD,IAAzC,EAA+C,OAAOF,IAAI,CAACC,MAAD,CAAX;AAC/CL,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,OAAO,CAACQ,YAAR,CAAqBD,IAAvD;AACAF,IAAAA,IAAI,CAACC,MAAD,CAAJ,CAHgB,CAGF;;AACZ,UAAM;AAAEG,MAAAA,GAAF;AAAOC,MAAAA,MAAP;AAAeC,MAAAA,IAAf;AAAqBC,MAAAA,OAArB;AAA8BC,MAAAA,QAA9B;AAAwCC,MAAAA;AAAxC,QAAoDR,MAA1D;AACA,QAAGM,OAAH,EAAYR,QAAQ;;AACtB,QAAI;AACF,YAAMW,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,OAAN,CAAc;AACnCC,QAAAA,OAAO,EAAE,kDAD0B;AAEnCR,QAAAA,GAFmC;AAGnCC,QAAAA,MAHmC;AAInCC,QAAAA;AAJmC,OAAd,CAAvB,CADE,CAOF;;AACAV,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAE,MAAAA,QAAQ,CAACJ,OAAO,CAACkB,cAAR,CAAuBH,QAAQ,CAACJ,IAAhC,CAAD,CAAR,CATE,CAUF;;AACA,UAAIE,QAAJ,EAAcT,QAAQ,CAAC;AAAEG,QAAAA,IAAI,EAAEM,QAAR;AAAkBM,QAAAA,OAAO,EAAEJ,QAAQ,CAACJ;AAApC,OAAD,CAAR;AACf,KAZD,CAYE,OAAOS,KAAP,EAAc;AACd;AACAhB,MAAAA,QAAQ,CAACJ,OAAO,CAACqB,aAAR,CAAsBD,KAAtB,CAAD,CAAR,CAFc,CAGd;;AACA,UAAIN,OAAJ,EAAaV,QAAQ,CAAC;AAAEG,QAAAA,IAAI,EAAEO,OAAR;AAAiBK,QAAAA,OAAO,EAAEC;AAA1B,OAAD,CAAR;AACd;AACF,GA1BD;AAAA,CADF;;AA4BA,eAAejB,GAAf","sourcesContent":["import axios from \"axios\";\nimport * as actions from \"../../actions\";\nconsole.log(\"API !!!\");\nconst api =\n  ({ dispatch }) =>\n  (next) =>\n  async (action) => {\n    if (action.type !== actions.apiCallBegan.type) return next(action);\n    console.log(\"TYPE: apiCallBegan\", actions.apiCallBegan.type);\n    next(action); // if not placed here, this action will be swallowed and redux will move onto the actions defined below this\n      const { url, method, data, onStart, onSucces, onError } = action;\n      if(onStart) dispatch\n    try {\n      const response = await axios.request({\n        baseURL: \"http://localhost:8082/api/users/get-all-students\",\n        url,\n        method,\n        data,\n      });\n      //general\n      console.log(\"dispatch success action\");\n      dispatch(actions.apiCallSuccess(response.data));\n      // sepcific\n      if (onSucces) dispatch({ type: onSucces, payload: response.data });\n    } catch (error) {\n      // general error message\n      dispatch(actions.apiCallFailed(error));\n      // specific error message\n      if (onError) dispatch({ type: onError, payload: error });\n    }\n  };\nexport default api;\n"]},"metadata":{},"sourceType":"module"}