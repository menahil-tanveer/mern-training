{"ast":null,"code":"import axios from \"axios\";\nimport { usersAdded } from \"../users\";\nimport * as actions from \"../api\";\n\nconst api = _ref => {\n  let {\n    dispatch,\n    getState\n  } = _ref;\n  return next => async action => {\n    if (action.type !== actions.apiCallBegan) return next(action);\n    next(action); // if not placed here, this action will be swallowed and redux will move onto the actions defined below this\n\n    const {\n      url,\n      onSuccess,\n      onError\n    } = action.payload; // if (onStart) dispatch({ type: onStart });\n    // next(action);\n\n    console.log(\"url::\");\n\n    try {\n      const response = await axios.request({\n        baseURL: \"https://jsonplaceholder.typicode.com/\",\n        url // data, // optional\n\n      }); //general\n      // dispatch(action.payload.apiCallSuccess(response.data));\n      // sepcific\n\n      console.log(\"onSuccess\");\n      if (onSuccess) dispatch(usersAdded(response.data)); // this method will update the state of users\n      //   dispatch({ type: action.payload.onSuccess, payload: response.data });\n\n      console.log(\"users\", response.data);\n      next(action);\n    } catch (error) {\n      // General error message\n      dispatch(actions.apiCallFailed(error)); // Specific error message\n\n      if (onError) dispatch({\n        type: onError,\n        payload: error\n      });\n    }\n  };\n};\n\nexport default api;","map":{"version":3,"sources":["/Users/menahaltanveer/Desktop/mern-training/redux-practice/src/store/middleware/api.js"],"names":["axios","usersAdded","actions","api","dispatch","getState","next","action","type","apiCallBegan","url","onSuccess","onError","payload","console","log","response","request","baseURL","data","error","apiCallFailed"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,UAA3B;AACA,OAAO,KAAKC,OAAZ,MAAyB,QAAzB;;AACA,MAAMC,GAAG,GACP;AAAA,MAAC;AAAEC,IAAAA,QAAF;AAAYC,IAAAA;AAAZ,GAAD;AAAA,SACCC,IAAD,IACA,MAAOC,MAAP,IAAkB;AAChB,QAAIA,MAAM,CAACC,IAAP,KAAgBN,OAAO,CAACO,YAA5B,EAA0C,OAAOH,IAAI,CAACC,MAAD,CAAX;AAC1CD,IAAAA,IAAI,CAACC,MAAD,CAAJ,CAFgB,CAEF;;AACd,UAAM;AAAEG,MAAAA,GAAF;AAAOC,MAAAA,SAAP;AAAkBC,MAAAA;AAAlB,QAA8BL,MAAM,CAACM,OAA3C,CAHgB,CAIhB;AACA;;AACEC,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;;AACF,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,OAAN,CAAc;AACnCC,QAAAA,OAAO,EAAE,uCAD0B;AAEnCR,QAAAA,GAFmC,CAGnC;;AAHmC,OAAd,CAAvB,CADE,CAMF;AACA;AACA;;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA,UAAIJ,SAAJ,EAAeP,QAAQ,CAACH,UAAU,CAACe,QAAQ,CAACG,IAAV,CAAX,CAAR,CAVb,CAUkD;AACpD;;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBC,QAAQ,CAACG,IAA9B;AACAb,MAAAA,IAAI,CAACC,MAAD,CAAJ;AACD,KAdD,CAcE,OAAOa,KAAP,EAAc;AACd;AACAhB,MAAAA,QAAQ,CAACF,OAAO,CAACmB,aAAR,CAAsBD,KAAtB,CAAD,CAAR,CAFc,CAGd;;AACA,UAAIR,OAAJ,EAAaR,QAAQ,CAAC;AAAEI,QAAAA,IAAI,EAAEI,OAAR;AAAiBC,QAAAA,OAAO,EAAEO;AAA1B,OAAD,CAAR;AACd;AACF,GA7BD;AAAA,CADF;;AA+BA,eAAejB,GAAf","sourcesContent":["import axios from \"axios\";\nimport { usersAdded } from \"../users\";\nimport * as actions from \"../api\";\nconst api =\n  ({ dispatch, getState }) =>\n  (next) =>\n  async (action) => {\n    if (action.type !== actions.apiCallBegan) return next(action);\n    next(action); // if not placed here, this action will be swallowed and redux will move onto the actions defined below this\n    const { url, onSuccess, onError } = action.payload;\n    // if (onStart) dispatch({ type: onStart });\n    // next(action);\n      console.log(\"url::\")\n    try {\n      const response = await axios.request({\n        baseURL: \"https://jsonplaceholder.typicode.com/\",\n        url,\n        // data, // optional\n      });\n      //general\n      // dispatch(action.payload.apiCallSuccess(response.data));\n      // sepcific\n      console.log(\"onSuccess\");\n      if (onSuccess) dispatch(usersAdded(response.data)); // this method will update the state of users\n      //   dispatch({ type: action.payload.onSuccess, payload: response.data });\n      console.log(\"users\", response.data);\n      next(action);\n    } catch (error) {\n      // General error message\n      dispatch(actions.apiCallFailed(error));\n      // Specific error message\n      if (onError) dispatch({ type: onError, payload: error });\n    }\n  };\nexport default api;\n"]},"metadata":{},"sourceType":"module"}